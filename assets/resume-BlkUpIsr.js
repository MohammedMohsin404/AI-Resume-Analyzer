import{a as n,o as e,w as P,A as E,v as M,t as z}from"./chunk-QMGIS6GS-DX0VMMAr.js";import{u as D}from"./puter-N-LIF3ap.js";import{c as N}from"./utils-CLdLQqWL.js";const H=({score:s=75})=>{const[t,r]=n.useState(0),a=n.useRef(null),l=s/100;return n.useEffect(()=>{a.current&&r(a.current.getTotalLength())},[]),e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("div",{className:"relative w-40 h-20",children:[e.jsxs("svg",{viewBox:"0 0 100 50",className:"w-full h-full",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gaugeGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#a78bfa"}),e.jsx("stop",{offset:"100%",stopColor:"#fca5a5"})]})}),e.jsx("path",{d:"M10,50 A40,40 0 0,1 90,50",fill:"none",stroke:"#e5e7eb",strokeWidth:"10",strokeLinecap:"round"}),e.jsx("path",{ref:a,d:"M10,50 A40,40 0 0,1 90,50",fill:"none",stroke:"url(#gaugeGradient)",strokeWidth:"10",strokeLinecap:"round",strokeDasharray:t,strokeDashoffset:t*(1-l)})]}),e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center pt-2",children:e.jsxs("div",{className:"text-xl font-semibold pt-4",children:[s,"/100"]})})]})})},F=({score:s})=>{let t="",r="";return s>70?(t="bg-badge-green text-green-600",r="Strong"):s>49?(t="bg-badge-yellow text-yellow-600",r="Good Start"):(t="bg-badge-red text-red-600",r="Needs Work"),e.jsx("div",{className:`px-3 py-1 rounded-full ${t}`,children:e.jsx("p",{className:"text-sm font-medium",children:r})})},h=({title:s,score:t})=>{const r=t>70?"text-green-600":t>49?"text-yellow-600":"text-red-600";return e.jsx("div",{className:"resume-summary",children:e.jsxs("div",{className:"category",children:[e.jsxs("div",{className:"flex flex-row gap-2 items-center justify-center",children:[e.jsx("p",{className:"text-2xl",children:s}),e.jsx(F,{score:t})]}),e.jsxs("p",{className:"text-2xl",children:[e.jsx("span",{className:r,children:t}),"/100"]})]})})},J=({feedback:s})=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-md w-full",children:[e.jsxs("div",{className:"flex flex-row items-center p-4 gap-8",children:[e.jsx(H,{score:s.overallScore}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Your Resume Score"}),e.jsx("p",{className:"text-sm text-gray-500",children:"This score is calculated based on the variables listed below."})]})]}),e.jsx(h,{title:"Tone & Style",score:s.toneAndStyle.score}),e.jsx(h,{title:"Content",score:s.content.score}),e.jsx(h,{title:"Structure",score:s.structure.score}),e.jsx(h,{title:"Skills",score:s.skills.score})]}),O=({score:s,suggestions:t})=>{const r=s>69?"from-green-100":s>49?"from-yellow-100":"from-red-100",a=s>69?"/icons/ats-good.svg":s>49?"/icons/ats-warning.svg":"/icons/ats-bad.svg",l=s>69?"Great Job!":s>49?"Good Start":"Needs Improvement";return e.jsxs("div",{className:`bg-gradient-to-b ${r} to-white rounded-2xl shadow-md w-full p-6`,children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("img",{src:a,alt:"ATS Score Icon",className:"w-12 h-12"}),e.jsx("div",{children:e.jsxs("h2",{className:"text-2xl font-bold",children:["ATS Score - ",s,"/100"]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:l}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This score represents how well your resume is likely to perform in Applicant Tracking Systems used by employers."}),e.jsx("div",{className:"space-y-3",children:t.map((o,m)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("img",{src:o.type==="good"?"/icons/check.svg":"/icons/warning.svg",alt:o.type==="good"?"Check":"Warning",className:"w-5 h-5 mt-1"}),e.jsx("p",{className:o.type==="good"?"text-green-700":"text-amber-700",children:o.tip})]},m))})]}),e.jsx("p",{className:"text-gray-700 italic",children:"Keep refining your resume to improve your chances of getting past ATS filters and into the hands of recruiters."})]})},$=n.createContext(void 0),B=()=>{const s=n.useContext($);if(!s)throw new Error("Accordion components must be used within an Accordion");return s},Y=({children:s,defaultOpen:t,allowMultiple:r=!1,className:a=""})=>{const[l,o]=n.useState(t?[t]:[]),m=i=>{o(c=>r?c.includes(i)?c.filter(b=>b!==i):[...c,i]:c.includes(i)?[]:[i])},u=i=>l.includes(i);return e.jsx($.Provider,{value:{activeItems:l,toggleItem:m,isItemActive:u},children:e.jsx("div",{className:`space-y-2 ${a}`,children:s})})},f=({id:s,children:t,className:r=""})=>e.jsx("div",{className:`overflow-hidden border-b border-gray-200 ${r}`,children:t}),j=({itemId:s,children:t,className:r="",icon:a,iconPosition:l="right"})=>{const{toggleItem:o,isItemActive:m}=B(),u=m(s),i=e.jsx("svg",{className:N("w-5 h-5 transition-transform duration-200",{"rotate-180":u}),fill:"none",stroke:"#98A2B3",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),c=()=>{o(s)};return e.jsxs("button",{onClick:c,className:`
        w-full px-4 py-3 text-left
        focus:outline-none
        transition-colors duration-200 flex items-center justify-between cursor-pointer
        ${r}
      `,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[l==="left"&&(a||i),e.jsx("div",{className:"flex-1",children:t})]}),l==="right"&&(a||i)]})},p=({itemId:s,children:t,className:r=""})=>{const{isItemActive:a}=B(),l=a(s);return e.jsx("div",{className:`
        overflow-hidden transition-all duration-300 ease-in-out
        ${l?"max-h-fit opacity-100":"max-h-0 opacity-0"}
        ${r}
      `,children:e.jsx("div",{className:"px-4 py-3 ",children:t})})},K=({score:s})=>e.jsxs("div",{className:N("flex flex-row gap-1 items-center px-2 py-0.5 rounded-[96px]",s>69?"bg-badge-green":s>39?"bg-badge-yellow":"bg-badge-red"),children:[e.jsx("img",{src:s>69?"/icons/check.svg":"/icons/warning.svg",alt:"score",className:"size-4"}),e.jsxs("p",{className:N("text-sm font-medium",s>69?"text-badge-green-text":s>39?"text-badge-yellow-text":"text-badge-red-text"),children:[s,"/100"]})]}),v=({title:s,categoryScore:t})=>e.jsxs("div",{className:"flex flex-row gap-4 items-center py-2",children:[e.jsx("p",{className:"text-2xl font-semibold",children:s}),e.jsx(K,{score:t})]}),y=({tips:s})=>e.jsxs("div",{className:"flex flex-col gap-4 items-center w-full",children:[e.jsx("div",{className:"bg-gray-50 w-full rounded-lg px-5 py-4 grid grid-cols-2 gap-4",children:s.map((t,r)=>e.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[e.jsx("img",{src:t.type==="good"?"/icons/check.svg":"/icons/warning.svg",alt:"score",className:"size-5"}),e.jsx("p",{className:"text-xl text-gray-500 ",children:t.tip})]},r))}),e.jsx("div",{className:"flex flex-col gap-4 w-full",children:s.map((t,r)=>e.jsxs("div",{className:N("flex flex-col gap-2 rounded-2xl p-4",t.type==="good"?"bg-green-50 border border-green-200 text-green-700":"bg-yellow-50 border border-yellow-200 text-yellow-700"),children:[e.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[e.jsx("img",{src:t.type==="good"?"/icons/check.svg":"/icons/warning.svg",alt:"score",className:"size-5"}),e.jsx("p",{className:"text-xl font-semibold",children:t.tip})]}),e.jsx("p",{children:t.explanation})]},r+t.tip))})]}),_=({feedback:s})=>e.jsx("div",{className:"flex flex-col gap-4 w-full",children:e.jsxs(Y,{children:[e.jsxs(f,{id:"tone-style",children:[e.jsx(j,{itemId:"tone-style",children:e.jsx(v,{title:"Tone & Style",categoryScore:s.toneAndStyle.score})}),e.jsx(p,{itemId:"tone-style",children:e.jsx(y,{tips:s.toneAndStyle.tips})})]}),e.jsxs(f,{id:"content",children:[e.jsx(j,{itemId:"content",children:e.jsx(v,{title:"Content",categoryScore:s.content.score})}),e.jsx(p,{itemId:"content",children:e.jsx(y,{tips:s.content.tips})})]}),e.jsxs(f,{id:"structure",children:[e.jsx(j,{itemId:"structure",children:e.jsx(v,{title:"Structure",categoryScore:s.structure.score})}),e.jsx(p,{itemId:"structure",children:e.jsx(y,{tips:s.structure.tips})})]}),e.jsxs(f,{id:"skills",children:[e.jsx(j,{itemId:"skills",children:e.jsx(v,{title:"Skills",categoryScore:s.skills.score})}),e.jsx(p,{itemId:"skills",children:e.jsx(y,{tips:s.skills.tips})})]})]})}),Z=()=>[{title:"Resumind | Review "},{name:"description",content:"Detailed overview of your resume"}],q=()=>{const{auth:s,isLoading:t,fs:r,kv:a}=D(),{id:l}=E(),[o,m]=n.useState(""),[u,i]=n.useState(""),[c,b]=n.useState(null),[A,g]=n.useState("loading"),[U,w]=n.useState("Loading your resume..."),W=M();return n.useEffect(()=>{!t&&!s.isAuthenticated&&W(`/auth?next=/resume/${l}`)},[t]),n.useEffect(()=>{let S=null,I=!0;const C=async()=>{if(!I)return;g(x=>x==="loading"?"loading":x);const T=await a.get(`resume:${l}`);if(!T){g("error"),w("We could not find that resume. Try uploading it again.");return}let d;try{d=JSON.parse(T)}catch(x){console.error("Failed to parse stored resume data",x),g("error"),w("We ran into a problem loading your resume.");return}const k=d.status==="complete"||d.feedback?"complete":d.status||"processing";g(k),w(k==="processing"?"We are analyzing your resume. This usually takes less than a minute.":"Your AI feedback is ready.");const[R,L]=await Promise.all([r.read(d.resumePath),r.read(d.imagePath)]);if(R){const x=new Blob([R],{type:"application/pdf"}),G=URL.createObjectURL(x);i(G)}if(L){const x=URL.createObjectURL(L);m(x)}d.feedback&&b(d.feedback),k!=="complete"&&!d.feedback&&(S=setTimeout(C,4e3))};return C(),()=>{I=!1,S&&clearTimeout(S)}},[l]),e.jsxs("main",{className:"!pt-0",children:[e.jsx("nav",{className:"resume-nav",children:e.jsxs(z,{to:"/",className:"back-button",children:[e.jsx("img",{src:"/icons/back.svg",alt:"logo",className:"w-2.5 h-2.5"}),e.jsx("span",{className:"text-gray-800 text-sm font-semibold",children:"Back to Homepage"})]})}),e.jsxs("div",{className:"flex flex-row w-full max-lg:flex-col-reverse",children:[e.jsx("section",{className:"feedback-section bg-[url('/images/bg-small.svg') bg-cover h-[100vh] sticky top-0 items-center justify-center",children:o&&u&&e.jsx("div",{className:"animate-in fade-in duration-1000 gradient-border max-sm:m-0 h-[90%] max-wxl:h-fit w-fit",children:e.jsx("a",{href:u,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:o,className:"w-full h-full object-contain rounded-2xl",title:"resume"})})})}),e.jsxs("section",{className:"feedback-section",children:[e.jsx("h2",{className:"text-4xl !text-black font-bold",children:"Resume Review"}),c?e.jsxs("div",{className:"flex flex-col gap-8 animate-in fade-in duration-1000",children:[e.jsx(J,{feedback:c}),e.jsx(O,{score:c.ATS.score||0,suggestions:c.ATS.tips||[]}),e.jsx(_,{feedback:c})]}):e.jsxs("div",{className:"flex flex-col items-center gap-4 animate-in fade-in duration-1000",children:[e.jsx("p",{className:`text-base text-center ${A==="error"?"text-red-600":"text-gray-600"}`,children:U}),A!=="error"&&e.jsx("img",{src:"/images/resume-scan-2.gif",className:"w-full"})]})]})]})]})},ee=P(q);export{ee as default,Z as meta};
